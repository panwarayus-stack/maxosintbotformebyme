<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>IMEI INFO | BY MR WEIRDO</title>
<style>
  body{background:#000;color:#00eaff;font-family:monospace;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;padding:20px}
  .card{width:100%;max-width:720px;background:#111;padding:18px;border-radius:10px;box-shadow:0 0 15px #00eaff;text-align:center}
  h1{margin:0 0 12px;font-size:1.6rem;text-shadow:0 0 10px #00eaff}
  input{width:72%;padding:10px;border-radius:6px;border:none;background:#000;color:#00eaff;outline:none;text-align:center;font-size:15px}
  button{margin-top:12px;padding:10px 16px;border-radius:6px;border:none;background:#00eaff;color:#000;font-weight:700;cursor:pointer}
  button:hover{background:#00bcd4}
  pre{margin-top:14px;background:#000;padding:12px;border-radius:8px;white-space:pre-wrap;word-break:break-word;text-align:left;max-height:380px;overflow:auto;box-shadow:inset 0 0 10px #00eaff}
  .small{font-size:13px;color:#9fe8ff;margin-top:8px}
  .copy-btn{display:none;margin-top:10px;padding:8px 12px;border-radius:6px;border:none;background:#00eaff;color:#000;cursor:pointer}
  .loading{animation:blink 1s infinite alternate}
  @keyframes blink{from{opacity:.35}to{opacity:1}}
</style>
</head>
<body>
  <div class="card">
    <h1>üì± IMEI INFO ‚Äî BY MR WEIRDO</h1>
    <input id="imei" inputmode="numeric" placeholder="Enter IMEI (15 digits) e.g. 490154203237518" />
    <br>
    <button onclick="lookup()">üîç Lookup</button>
    <div class="small">Tip: set IMEI_API_TEMPLATE in your project env to use a real provider. See docs.</div>
    <pre id="result">Result will appear here...</pre>
    <button id="copyBtn" class="copy-btn" onclick="copyResult()">üìã Copy Data</button>
  </div>

<script>
async function lookup(){
  const imei = document.getElementById('imei').value.trim();
  const out = document.getElementById('result');
  const copy = document.getElementById('copyBtn');

  if(!imei){
    alert('‚ö†Ô∏è Please enter IMEI');
    return;
  }
  // basic IMEI validation (15 digits)
  if(!/^\d{14,16}$/.test(imei)){
    if(!confirm('IMEI looks unusual (not 15 digits). Proceed anyway?')) return;
  }

  out.textContent = '‚è≥ Fetching IMEI data...';
  out.classList.add('loading');
  copy.style.display = 'none';

  try{
    const res = await fetch(`/api/imeidata?imei=${encodeURIComponent(imei)}`);
    const txt = await res.text();
    out.classList.remove('loading');
    out.textContent = txt;
    if(res.ok && !txt.startsWith('‚ùå') && !txt.startsWith('‚ö†Ô∏è')) copy.style.display = 'inline-block';
  }catch(e){
    out.classList.remove('loading');
    out.textContent = '‚ùå Error: ' + e.message;
  }
}

function copyResult(){
  const t = document.getElementById('result').innerText;
  navigator.clipboard.writeText(t).then(()=> alert('‚úÖ Data copied to clipboard'));
}
</script>
</body>
</html>
